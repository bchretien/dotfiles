- clean: ['~', '~/.config', '~/.vim', '~/.vim/autoload']

- shell:
    - git submodule update --init --recursive
    - ./prepare_ini.sh

- link:
    ~/.Xresources: Xresources
    ~/.dotfiles: ''
    ~/.fonts: fonts/
    ~/.fzfrc: fzfrc
    ~/.gdb: gdb/
    ~/.gdbinit: gdbinit
    ~/.git_template: git_template/
    ~/.gitconfig: gitconfig
    ~/.gitconfig.local: gitconfig.local
    ~/.gnupg: gnupg/
    ~/.hgrc: hgrc
    ~/.hgrc.local: hgrc.local
    ~/.i3: i3/
    ~/.latexmkrc: latexmkrc
    ~/.mpd: mpd/
    ~/.screenrc: screenrc
    ~/.themes: themes/
    ~/.taskrc: taskrc
    ~/.tmux.conf: tmux.conf
    ~/.tmux: tmux/
    ~/.weechat: weechat/
    ~/.xbindkeysrc: xbindkeysrc
    # zsh
    ~/.zprezto: zsh/zprezto/
    ~/.zpreztorc: zsh/zpreztorc
    ~/.zshrc: zsh/zshrc
    ~/.zshrc.local: zsh/zshrc.local
    ~/.zshenv: zsh/zshenv
    ~/.zshenv.local: zsh/zshenv.local
    ~/.zprofile: zsh/zprofile
    ~/.zprofile.local: zsh/zprofile.local
    # editor
    ~/.emacs.d: editor/emacs.d/
    ~/.emacs: editor/emacs
    ~/.vimrc: editor/vimrc
    ~/.vimrc.plugins: editor/vimrc.plugins
    ~/.vim/autoload/plug.vim:
      create: true
      path: editor/vim/autoload/plug.vim
    ~/.vim/custom_snippets:
      create: true
      path: editor/custom_snippets/
    # media
    ~/.ncmpcpp: media/ncmpcpp/
    # Special case: ~/.config
    ~/.config/fontconfig:
      create: true
      path: config/fontconfig/
    ~/.config/glances:
      create: true
      path: config/glances/
    ~/.config/qutebrowser:
      create: true
      path: config/qutebrowser/
    ~/.config/ranger:
      create: true
      path: config/ranger/
    ~/.config/termite:
      create: true
      path: config/termite/

- shell:
    - fc-cache -vf ~/.fonts # load fonts
    - mkdir -p ~/.ssh 2> /dev/null
    # Install vim plugins
    -
      command: vim -Nu ~/.vimrc.plugins +PlugUpdate +qall &> /dev/null
      stdin: true
      stdout: true
      stderr: true
